(function(e,t){function i(e){var t=e.data("overlayid");return t||t===0?r[t]:e}var n={init:function(n){var i=this;if(i.length>1){i.each(function(){e(this).ajaxLoading(n)});return i}else if(!i.length){return i}if(i.data("overlayid")){return i}var s=function(){},o=i.s=e.extend({backgroundCSS:{},body:"",containerCSS:{},onBeforeClose:s,onBeforeOpen:s,onClose:s,onOpen:s,title:""},n),u='<h1 class="overlay-title">'+o.title+"</h1>"+'<div class="overlay-body">'+o.body+"</div>"+'<span class="overlay-close">'+tx("Close")+"</span>",a=function(){i.overlay("hide")};i.append('<div class="overlay-bg"></div><div class="overlay-content">'+u+"</div>");i.css({display:"none",position:"fixed",width:"100%",height:"100%",top:0,left:0});e(".overlay-bg",i).css(e.extend({width:"100%",height:"100%",position:"fixed"},o.backgroundCSS)).click(a);e(".overlay-content",i).css(e.extend({position:"relative","max-width":"600px",width:"80%",top:100,background:"#FFF",padding:"20px",border:"solid thin #FEFEFE","box-shadow":"0px 0px 3px #6B6B6B",margin:"auto"},o.containerCSS));e(".overlay-title",i).css({padding:"10px 0",borderBottom:"dotted thin #ccc"});e(".overlay-body",i).css({"max-height":500,overflow:"auto"});e(".overlay-close",i).css({cursor:"pointer",display:"inline-block",paddingTop:10}).click(a);var f=++t;i.attr({"data-overlayid":f});r[f]=i},show:function(t){var n=this;if(n.s.onBeforeOpen.call(n,t)===false){return n}n.show();if(t.title){e(".overlay-title",n).html(t.title)}if(t.title){e(".overlay-body",n).html(t.body).scrollTop(0)}n.s.onOpen.call(n,t);return n},hide:function(){var e=this;if(e.s.onBeforeClose.call(e)===false){return e}this.hide();e.s.onClose.call(e);return e}},r={};e.fn.overlay=function(t){var r=i(this);if(n[t]){return n[t].apply(r,Array.prototype.slice.call(arguments,1))}else if(Object.prototype.toString.call(t)==="[object Object]"||!t){return n.init.apply(r,arguments)}else{e.error(["The method ",t," does not exist"].join(""))}}})(jQuery,0)